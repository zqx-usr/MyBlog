{"remainingRequest":"B:\\GitCode\\MyBlog\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!B:\\GitCode\\MyBlog\\blog-vue\\blog\\src\\components\\TalkComment.vue?vue&type=script&lang=js&","dependencies":[{"path":"B:\\GitCode\\MyBlog\\blog-vue\\blog\\src\\components\\TalkComment.vue","mtime":1678087997342},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678087981122},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1678087980232},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678087981122},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1678087994067}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUmVwbHkgZnJvbSAiLi9SZXBseSI7DQppbXBvcnQgUGFnaW5nIGZyb20gIi4vUGFnaW5nIjsNCmltcG9ydCBFbW9qaSBmcm9tICIuL0Vtb2ppIjsNCmltcG9ydCBFbW9qaUxpc3QgZnJvbSAiLi4vYXNzZXRzL2pzL2Vtb2ppIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFJlcGx5LA0KICAgIEVtb2ppLA0KICAgIFBhZ2luZw0KICB9LA0KICBwcm9wczogew0KICAgIHR5cGU6IHsNCiAgICAgIHR5cGU6IE51bWJlcg0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmxpc3RDb21tZW50cygpOw0KICB9LA0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmVGcmVzaDogdHJ1ZSwNCiAgICAgIGNvbW1lbnRDb250ZW50OiAiIiwNCiAgICAgIGNob29zZUVtb2ppOiBmYWxzZSwNCiAgICAgIGN1cnJlbnQ6IDEsDQogICAgICBjb21tZW50TGlzdDogW10sDQogICAgICBjb3VudDogMA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByZXBseUNvbW1lbnQoaW5kZXgsIGl0ZW0pIHsNCiAgICAgIHRoaXMuJHJlZnMucmVwbHkuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS4kZWwuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIH0pOw0KICAgICAgLy/kvKDlgLznu5nlm57lpI3moYYNCiAgICAgIHRoaXMuJHJlZnMucmVwbHlbaW5kZXhdLmNvbW1lbnRDb250ZW50ID0gIiI7DQogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5uaWNrbmFtZSA9IGl0ZW0ubmlja25hbWU7DQogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5yZXBseVVzZXJJZCA9IGl0ZW0udXNlcklkOw0KICAgICAgdGhpcy4kcmVmcy5yZXBseVtpbmRleF0ucGFyZW50SWQgPSB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5pZDsNCiAgICAgIHRoaXMuJHJlZnMucmVwbHlbaW5kZXhdLmNob29zZUVtb2ppID0gZmFsc2U7DQogICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS5pbmRleCA9IGluZGV4Ow0KICAgICAgdGhpcy4kcmVmcy5yZXBseVtpbmRleF0uJGVsLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgIH0sDQogICAgYWRkRW1vamkoa2V5KSB7DQogICAgICB0aGlzLmNvbW1lbnRDb250ZW50ICs9IGtleTsNCiAgICB9LA0KICAgIGNoZWNrUmVwbGllcyhpbmRleCwgaXRlbSkgew0KICAgICAgdGhpcy5heGlvcw0KICAgICAgICAuZ2V0KCIvYXBpL2NvbW1lbnRzLyIgKyBpdGVtLmlkICsgIi9yZXBsaWVzIiwgew0KICAgICAgICAgIHBhcmFtczogeyBjdXJyZW50OiAxLCBzaXplOiA1IH0NCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy5jaGVja1tpbmRleF0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICBpdGVtLnJlcGx5RFRPTGlzdCA9IGRhdGEuZGF0YTsNCiAgICAgICAgICAvL+i2hei/hzHpobXmiY3mmL7npLrliIbpobUNCiAgICAgICAgICBpZiAoTWF0aC5jZWlsKGl0ZW0ucmVwbHlDb3VudCAvIDUpID4gMSkgew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5wYWdpbmdbaW5kZXhdLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGNoYW5nZVJlcGx5Q3VycmVudChjdXJyZW50LCBpbmRleCwgY29tbWVudElkKSB7DQogICAgICAvL+afpeeci+S4i+S4gOmhteWbnuWkjQ0KICAgICAgdGhpcy5heGlvcw0KICAgICAgICAuZ2V0KCIvYXBpL2NvbW1lbnRzLyIgKyBjb21tZW50SWQgKyAiL3JlcGxpZXMiLCB7DQogICAgICAgICAgcGFyYW1zOiB7IGN1cnJlbnQ6IGN1cnJlbnQsIHNpemU6IDUgfQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsNCiAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5yZXBseURUT0xpc3QgPSBkYXRhLmRhdGE7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgbGlzdENvbW1lbnRzKCkgew0KICAgICAgLy/mn6XnnIvor4TorroNCiAgICAgIGNvbnN0IHBhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOw0KICAgICAgY29uc3QgYXJyID0gcGF0aC5zcGxpdCgiLyIpOw0KICAgICAgdmFyIHBhcmFtID0gew0KICAgICAgICBjdXJyZW50OiB0aGlzLmN1cnJlbnQsDQogICAgICAgIHR5cGU6IHRoaXMudHlwZQ0KICAgICAgfTsNCiAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7DQogICAgICAgIGNhc2UgMToNCiAgICAgICAgY2FzZSAzOg0KICAgICAgICAgIHBhcmFtLnRvcGljSWQgPSBhcnJbMl07DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICB0aGlzLmF4aW9zDQogICAgICAgIC5nZXQoIi9hcGkvY29tbWVudHMiLCB7DQogICAgICAgICAgcGFyYW1zOiBwYXJhbQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsNCiAgICAgICAgICBpZiAodGhpcy5jdXJyZW50ID09IDEpIHsNCiAgICAgICAgICAgIHRoaXMuY29tbWVudExpc3QgPSBkYXRhLmRhdGEucmVjb3JkTGlzdDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5jb21tZW50TGlzdC5wdXNoKC4uLmRhdGEuZGF0YS5yZWNvcmRMaXN0KTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5jdXJyZW50Kys7DQogICAgICAgICAgdGhpcy5jb3VudCA9IGRhdGEuZGF0YS5jb3VudDsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJnZXRDb21tZW50Q291bnQiLCB0aGlzLmNvdW50KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBpbnNlcnRDb21tZW50KCkgew0KICAgICAgLy/liKTmlq3nmbvlvZUNCiAgICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUudXNlcklkKSB7DQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZyA9IHRydWU7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIC8v5Yik56m6DQogICAgICBpZiAodGhpcy5jb21tZW50Q29udGVudC50cmltKCkgPT0gIiIpIHsNCiAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAiZXJyb3IiLCBtZXNzYWdlOiAi6K+E6K665LiN6IO95Li656m6IiB9KTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgLy/op6PmnpDooajmg4UNCiAgICAgIHZhciByZWcgPSAvXFsuKz9cXS9nOw0KICAgICAgdGhpcy5jb21tZW50Q29udGVudCA9IHRoaXMuY29tbWVudENvbnRlbnQucmVwbGFjZShyZWcsIGZ1bmN0aW9uKHN0cikgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICI8aW1nIHNyYz0gJyIgKw0KICAgICAgICAgIEVtb2ppTGlzdFtzdHJdICsNCiAgICAgICAgICAiJyB3aWR0aD0nMjInaGVpZ2h0PScyMCcgc3R5bGU9J3BhZGRpbmc6IDAgMXB4Jy8+Ig0KICAgICAgICApOw0KICAgICAgfSk7DQogICAgICAvL+WPkemAgeivt+axgg0KICAgICAgY29uc3QgcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGg7DQogICAgICBjb25zdCBhcnIgPSBwYXRoLnNwbGl0KCIvIik7DQogICAgICB2YXIgY29tbWVudCA9IHsNCiAgICAgICAgY29tbWVudENvbnRlbnQ6IHRoaXMuY29tbWVudENvbnRlbnQsDQogICAgICAgIHR5cGU6IHRoaXMudHlwZQ0KICAgICAgfTsNCiAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7DQogICAgICAgIGNhc2UgMToNCiAgICAgICAgY2FzZSAzOg0KICAgICAgICAgIGNvbW1lbnQudG9waWNJZCA9IGFyclsyXTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgPSAiIjsNCiAgICAgIHRoaXMuYXhpb3MucG9zdCgiL2FwaS9jb21tZW50cyIsIGNvbW1lbnQpLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgIGlmIChkYXRhLmZsYWcpIHsNCiAgICAgICAgICAvLyDmn6Xor6LmnIDmlrDor4TorroNCiAgICAgICAgICB0aGlzLmN1cnJlbnQgPSAxOw0KICAgICAgICAgIHRoaXMubGlzdENvbW1lbnRzKCk7DQogICAgICAgICAgY29uc3QgaXNSZXZpZXcgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ibG9nSW5mby53ZWJzaXRlQ29uZmlnDQogICAgICAgICAgICAuaXNDb21tZW50UmV2aWV3Ow0KICAgICAgICAgIGlmIChpc1Jldmlldykgew0KICAgICAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAid2Fybm5pbmciLCBtZXNzYWdlOiAi6K+E6K665oiQ5Yqf77yM5q2j5Zyo5a6h5qC45LitIiB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLor4TorrrmiJDlip8iIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBsaWtlKGNvbW1lbnQpIHsNCiAgICAgIC8vIOWIpOaWreeZu+W9lQ0KICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c2VySWQpIHsNCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9naW5GbGFnID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgLy8g5Y+R6YCB6K+35rGCDQogICAgICB0aGlzLmF4aW9zDQogICAgICAgIC5wb3N0KCIvYXBpL2NvbW1lbnRzLyIgKyBjb21tZW50LmlkICsgIi9saWtlIikNCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgaWYgKGRhdGEuZmxhZykgew0KICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm54K56LWeDQogICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuY29tbWVudExpa2VTZXQuaW5kZXhPZihjb21tZW50LmlkKSAhPSAtMSkgew0KICAgICAgICAgICAgICB0aGlzLiRzZXQoY29tbWVudCwgImxpa2VDb3VudCIsIGNvbW1lbnQubGlrZUNvdW50IC0gMSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLiRzZXQoY29tbWVudCwgImxpa2VDb3VudCIsIGNvbW1lbnQubGlrZUNvdW50ICsgMSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImNvbW1lbnRMaWtlIiwgY29tbWVudC5pZCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHJlbG9hZFJlcGx5KGluZGV4KSB7DQogICAgICB0aGlzLmF4aW9zDQogICAgICAgIC5nZXQoIi9hcGkvY29tbWVudHMvIiArIHRoaXMuY29tbWVudExpc3RbaW5kZXhdLmlkICsgIi9yZXBsaWVzIiwgew0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgY3VycmVudDogdGhpcy4kcmVmcy5wYWdlW2luZGV4XS5jdXJyZW50DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsNCiAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5yZXBseUNvdW50Kys7DQogICAgICAgICAgLy/lm57lpI3lpKfkuo415p2h5bGV56S65YiG6aG1DQogICAgICAgICAgaWYgKHRoaXMuY29tbWVudExpc3RbaW5kZXhdLnJlcGx5Q291bnQgPiA1KSB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnBhZ2luZ1tpbmRleF0uc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kcmVmcy5jaGVja1tpbmRleF0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICB0aGlzLiRyZWZzLnJlcGx5W2luZGV4XS4kZWwuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0W2luZGV4XS5yZXBseURUT0xpc3QgPSBkYXRhLmRhdGE7DQogICAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBpc0xpa2UoKSB7DQogICAgICByZXR1cm4gZnVuY3Rpb24oY29tbWVudElkKSB7DQogICAgICAgIHZhciBjb21tZW50TGlrZVNldCA9IHRoaXMuJHN0b3JlLnN0YXRlLmNvbW1lbnRMaWtlU2V0Ow0KICAgICAgICByZXR1cm4gY29tbWVudExpa2VTZXQuaW5kZXhPZihjb21tZW50SWQpICE9IC0xID8gImxpa2UtYWN0aXZlIiA6ICJsaWtlIjsNCiAgICAgIH07DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIGNvbW1lbnRMaXN0KCkgew0KICAgICAgdGhpcy5yZUZyZXNoID0gZmFsc2U7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMucmVGcmVzaCA9IHRydWU7DQogICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["TalkComment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TalkComment.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"comment-title\"><i class=\"iconfont iconpinglunzu\" />评论</div>\r\n    <!-- 评论框 -->\r\n    <div class=\"comment-wrapper\">\r\n      <div style=\"display:flex;width:100%\">\r\n        <v-avatar size=\"36\">\r\n          <img\r\n            v-if=\"this.$store.state.avatar\"\r\n            :src=\"this.$store.state.avatar\"\r\n          />\r\n          <img\r\n            v-else\r\n            :src=\"this.$store.state.blogInfo.websiteConfig.touristAvatar\"\r\n          />\r\n        </v-avatar>\r\n        <div style=\"width:100%\" class=\"ml-3\">\r\n          <div class=\"comment-input\">\r\n            <textarea\r\n              class=\"comment-textarea\"\r\n              v-model=\"commentContent\"\r\n              placeholder=\"留下点什么吧...\"\r\n              auto-grow\r\n              dense\r\n            />\r\n          </div>\r\n          <!-- 操作按钮 -->\r\n          <div class=\"emoji-container\">\r\n            <span\r\n              :class=\"chooseEmoji ? 'emoji-btn-active' : 'emoji-btn'\"\r\n              @click=\"chooseEmoji = !chooseEmoji\"\r\n            >\r\n              <i class=\"iconfont iconbiaoqing\" />\r\n            </span>\r\n            <button\r\n              @click=\"insertComment\"\r\n              class=\"upload-btn v-comment-btn\"\r\n              style=\"margin-left:auto\"\r\n            >\r\n              提交\r\n            </button>\r\n          </div>\r\n          <!-- 表情框 -->\r\n          <emoji @addEmoji=\"addEmoji\" :chooseEmoji=\"chooseEmoji\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 评论详情 -->\r\n    <div v-if=\"count > 0 && reFresh\">\r\n      <!-- 评论列表 -->\r\n      <div\r\n        class=\"comment-wrapper\"\r\n        v-for=\"(item, index) of commentList\"\r\n        :key=\"item.id\"\r\n      >\r\n        <!-- 头像 -->\r\n        <v-avatar size=\"40\" class=\"comment-avatar\">\r\n          <img :src=\"item.avatar\" />\r\n        </v-avatar>\r\n        <div class=\"comment-meta\">\r\n          <!-- 用户名 -->\r\n          <div class=\"comment-user\">\r\n            <span v-if=\"!item.webSite\">{{ item.nickname }}</span>\r\n            <a v-else :href=\"item.webSite\" target=\"_blank\">\r\n              {{ item.nickname }}\r\n            </a>\r\n            <v-icon size=\"20\" color=\"#ffa51e\" v-if=\"item.userId == 1\">\r\n              mdi-check-decagram\r\n            </v-icon>\r\n          </div>\r\n          <!-- 信息 -->\r\n          <div class=\"comment-info\">\r\n            <!-- 楼层 -->\r\n            <span style=\"margin-right:10px\">{{ count - index }}楼</span>\r\n            <!-- 发表时间 -->\r\n            <span style=\"margin-right:10px\">{{ item.createTime | date }}</span>\r\n            <!-- 点赞 -->\r\n            <span\r\n              :class=\"isLike(item.id) + ' iconfont icondianzan'\"\r\n              @click=\"like(item)\"\r\n            />\r\n            <span v-show=\"item.likeCount > 0\"> {{ item.likeCount }}</span>\r\n            <!-- 回复 -->\r\n            <span class=\"reply-btn\" @click=\"replyComment(index, item)\">\r\n              回复\r\n            </span>\r\n          </div>\r\n          <!-- 评论内容 -->\r\n          <p v-html=\"item.commentContent\" class=\"comment-content\"></p>\r\n          <!-- 回复人 -->\r\n          <div\r\n            style=\"display:flex\"\r\n            v-for=\"reply of item.replyDTOList\"\r\n            :key=\"reply.id\"\r\n          >\r\n            <!-- 头像 -->\r\n            <v-avatar size=\"36\" class=\"comment-avatar\">\r\n              <img :src=\"reply.avatar\" />\r\n            </v-avatar>\r\n            <div class=\"reply-meta\">\r\n              <!-- 用户名 -->\r\n              <div class=\"comment-user\">\r\n                <span v-if=\"!reply.webSite\">{{ reply.nickname }}</span>\r\n                <a v-else :href=\"reply.webSite\" target=\"_blank\">\r\n                  {{ reply.nickname }}\r\n                </a>\r\n                <v-icon size=\"20\" color=\"#ffa51e\" v-if=\"reply.userId == 1\">\r\n                  mdi-check-decagram\r\n                </v-icon>\r\n              </div>\r\n              <!-- 信息 -->\r\n              <div class=\"comment-info\">\r\n                <!-- 发表时间 -->\r\n                <span style=\"margin-right:10px\">\r\n                  {{ reply.createTime | date }}\r\n                </span>\r\n                <!-- 点赞 -->\r\n                <span\r\n                  :class=\"isLike(reply.id) + ' iconfont icondianzan'\"\r\n                  @click=\"like(reply)\"\r\n                />\r\n                <span v-show=\"reply.likeCount > 0\"> {{ reply.likeCount }}</span>\r\n                <!-- 回复 -->\r\n                <span class=\"reply-btn\" @click=\"replyComment(index, reply)\">\r\n                  回复\r\n                </span>\r\n              </div>\r\n              <!-- 回复内容 -->\r\n              <p class=\"comment-content\">\r\n                <!-- 回复用户名 -->\r\n                <template v-if=\"reply.replyUserId != item.userId\">\r\n                  <span v-if=\"!reply.replyWebSite\" class=\"ml-1\">\r\n                    @{{ reply.replyNickname }}\r\n                  </span>\r\n                  <a\r\n                    v-else\r\n                    :href=\"reply.replyWebSite\"\r\n                    target=\"_blank\"\r\n                    class=\"comment-nickname ml-1\"\r\n                  >\r\n                    @{{ reply.replyNickname }}\r\n                  </a>\r\n                  ，\r\n                </template>\r\n                <span v-html=\"reply.commentContent\" />\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <!-- 回复数量 -->\r\n          <div\r\n            class=\"mb-3\"\r\n            style=\"font-size:0.75rem;color:#6d757a\"\r\n            v-show=\"item.replyCount > 3\"\r\n            ref=\"check\"\r\n          >\r\n            共\r\n            <b>{{ item.replyCount }}</b>\r\n            条回复，\r\n            <span\r\n              style=\"color:#00a1d6;cursor:pointer\"\r\n              @click=\"checkReplies(index, item)\"\r\n            >\r\n              点击查看\r\n            </span>\r\n          </div>\r\n          <!-- 回复分页 -->\r\n          <div\r\n            class=\"mb-3\"\r\n            style=\"font-size:0.75rem;color:#222;display:none\"\r\n            ref=\"paging\"\r\n          >\r\n            <span style=\"padding-right:10px\">\r\n              共{{ Math.ceil(item.replyCount / 5) }}页\r\n            </span>\r\n            <paging\r\n              ref=\"page\"\r\n              :totalPage=\"Math.ceil(item.replyCount / 5)\"\r\n              :index=\"index\"\r\n              :commentId=\"item.id\"\r\n              @changeReplyCurrent=\"changeReplyCurrent\"\r\n            />\r\n          </div>\r\n          <!-- 回复框 -->\r\n          <Reply :type=\"type\" ref=\"reply\" @reloadReply=\"reloadReply\" />\r\n        </div>\r\n      </div>\r\n      <!-- 加载按钮 -->\r\n      <div class=\"load-wrapper\">\r\n        <v-btn outlined v-if=\"count > commentList.length\" @click=\"listComments\">\r\n          加载更多...\r\n        </v-btn>\r\n      </div>\r\n    </div>\r\n    <!-- 没有评论提示 -->\r\n    <div v-else style=\"padding:1.25rem;text-align:center\">\r\n      来发评论吧~\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Reply from \"./Reply\";\r\nimport Paging from \"./Paging\";\r\nimport Emoji from \"./Emoji\";\r\nimport EmojiList from \"../assets/js/emoji\";\r\nexport default {\r\n  components: {\r\n    Reply,\r\n    Emoji,\r\n    Paging\r\n  },\r\n  props: {\r\n    type: {\r\n      type: Number\r\n    }\r\n  },\r\n  created() {\r\n    this.listComments();\r\n  },\r\n  data: function() {\r\n    return {\r\n      reFresh: true,\r\n      commentContent: \"\",\r\n      chooseEmoji: false,\r\n      current: 1,\r\n      commentList: [],\r\n      count: 0\r\n    };\r\n  },\r\n  methods: {\r\n    replyComment(index, item) {\r\n      this.$refs.reply.forEach(item => {\r\n        item.$el.style.display = \"none\";\r\n      });\r\n      //传值给回复框\r\n      this.$refs.reply[index].commentContent = \"\";\r\n      this.$refs.reply[index].nickname = item.nickname;\r\n      this.$refs.reply[index].replyUserId = item.userId;\r\n      this.$refs.reply[index].parentId = this.commentList[index].id;\r\n      this.$refs.reply[index].chooseEmoji = false;\r\n      this.$refs.reply[index].index = index;\r\n      this.$refs.reply[index].$el.style.display = \"block\";\r\n    },\r\n    addEmoji(key) {\r\n      this.commentContent += key;\r\n    },\r\n    checkReplies(index, item) {\r\n      this.axios\r\n        .get(\"/api/comments/\" + item.id + \"/replies\", {\r\n          params: { current: 1, size: 5 }\r\n        })\r\n        .then(({ data }) => {\r\n          this.$refs.check[index].style.display = \"none\";\r\n          item.replyDTOList = data.data;\r\n          //超过1页才显示分页\r\n          if (Math.ceil(item.replyCount / 5) > 1) {\r\n            this.$refs.paging[index].style.display = \"flex\";\r\n          }\r\n        });\r\n    },\r\n    changeReplyCurrent(current, index, commentId) {\r\n      //查看下一页回复\r\n      this.axios\r\n        .get(\"/api/comments/\" + commentId + \"/replies\", {\r\n          params: { current: current, size: 5 }\r\n        })\r\n        .then(({ data }) => {\r\n          this.commentList[index].replyDTOList = data.data;\r\n        });\r\n    },\r\n    listComments() {\r\n      //查看评论\r\n      const path = this.$route.path;\r\n      const arr = path.split(\"/\");\r\n      var param = {\r\n        current: this.current,\r\n        type: this.type\r\n      };\r\n      switch (this.type) {\r\n        case 1:\r\n        case 3:\r\n          param.topicId = arr[2];\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      this.axios\r\n        .get(\"/api/comments\", {\r\n          params: param\r\n        })\r\n        .then(({ data }) => {\r\n          if (this.current == 1) {\r\n            this.commentList = data.data.recordList;\r\n          } else {\r\n            this.commentList.push(...data.data.recordList);\r\n          }\r\n          this.current++;\r\n          this.count = data.data.count;\r\n          this.$emit(\"getCommentCount\", this.count);\r\n        });\r\n    },\r\n    insertComment() {\r\n      //判断登录\r\n      if (!this.$store.state.userId) {\r\n        this.$store.state.loginFlag = true;\r\n        return false;\r\n      }\r\n      //判空\r\n      if (this.commentContent.trim() == \"\") {\r\n        this.$toast({ type: \"error\", message: \"评论不能为空\" });\r\n        return false;\r\n      }\r\n      //解析表情\r\n      var reg = /\\[.+?\\]/g;\r\n      this.commentContent = this.commentContent.replace(reg, function(str) {\r\n        return (\r\n          \"<img src= '\" +\r\n          EmojiList[str] +\r\n          \"' width='22'height='20' style='padding: 0 1px'/>\"\r\n        );\r\n      });\r\n      //发送请求\r\n      const path = this.$route.path;\r\n      const arr = path.split(\"/\");\r\n      var comment = {\r\n        commentContent: this.commentContent,\r\n        type: this.type\r\n      };\r\n      switch (this.type) {\r\n        case 1:\r\n        case 3:\r\n          comment.topicId = arr[2];\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      this.commentContent = \"\";\r\n      this.axios.post(\"/api/comments\", comment).then(({ data }) => {\r\n        if (data.flag) {\r\n          // 查询最新评论\r\n          this.current = 1;\r\n          this.listComments();\r\n          const isReview = this.$store.state.blogInfo.websiteConfig\r\n            .isCommentReview;\r\n          if (isReview) {\r\n            this.$toast({ type: \"warnning\", message: \"评论成功，正在审核中\" });\r\n          } else {\r\n            this.$toast({ type: \"success\", message: \"评论成功\" });\r\n          }\r\n        } else {\r\n          this.$toast({ type: \"error\", message: data.message });\r\n        }\r\n      });\r\n    },\r\n    like(comment) {\r\n      // 判断登录\r\n      if (!this.$store.state.userId) {\r\n        this.$store.state.loginFlag = true;\r\n        return false;\r\n      }\r\n      // 发送请求\r\n      this.axios\r\n        .post(\"/api/comments/\" + comment.id + \"/like\")\r\n        .then(({ data }) => {\r\n          if (data.flag) {\r\n            // 判断是否点赞\r\n            if (this.$store.state.commentLikeSet.indexOf(comment.id) != -1) {\r\n              this.$set(comment, \"likeCount\", comment.likeCount - 1);\r\n            } else {\r\n              this.$set(comment, \"likeCount\", comment.likeCount + 1);\r\n            }\r\n            this.$store.commit(\"commentLike\", comment.id);\r\n          }\r\n        });\r\n    },\r\n    reloadReply(index) {\r\n      this.axios\r\n        .get(\"/api/comments/\" + this.commentList[index].id + \"/replies\", {\r\n          params: {\r\n            current: this.$refs.page[index].current\r\n          }\r\n        })\r\n        .then(({ data }) => {\r\n          this.commentList[index].replyCount++;\r\n          //回复大于5条展示分页\r\n          if (this.commentList[index].replyCount > 5) {\r\n            this.$refs.paging[index].style.display = \"flex\";\r\n          }\r\n          this.$refs.check[index].style.display = \"none\";\r\n          this.$refs.reply[index].$el.style.display = \"none\";\r\n          this.commentList[index].replyDTOList = data.data;\r\n        });\r\n    }\r\n  },\r\n  computed: {\r\n    isLike() {\r\n      return function(commentId) {\r\n        var commentLikeSet = this.$store.state.commentLikeSet;\r\n        return commentLikeSet.indexOf(commentId) != -1 ? \"like-active\" : \"like\";\r\n      };\r\n    }\r\n  },\r\n  watch: {\r\n    commentList() {\r\n      this.reFresh = false;\r\n      this.$nextTick(() => {\r\n        this.reFresh = true;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.comment-wrapper {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  padding: 16px 20px;\r\n  border-radius: 10px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  box-shadow: 0 3px 8px 6px rgb(7 17 27 / 6%);\r\n  transition: all 0.3s ease 0s;\r\n}\r\n.comment-wrapper:hover {\r\n  box-shadow: 0 5px 10px 8px rgb(7 17 27 / 16%);\r\n  transform: translateY(-3px);\r\n}\r\n.comment-title {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 1.25rem;\r\n  font-weight: bold;\r\n  line-height: 40px;\r\n  margin-top: 20px;\r\n}\r\n.comment-title i {\r\n  font-size: 1.5rem;\r\n  margin-right: 5px;\r\n}\r\n.count {\r\n  padding: 5px;\r\n  line-height: 1.75;\r\n  font-size: 1.25rem;\r\n  font-weight: bold;\r\n}\r\n.comment-meta {\r\n  margin-left: 0.8rem;\r\n  width: 100%;\r\n  border-bottom: 1px dashed #f5f5f5;\r\n}\r\n.reply-meta {\r\n  margin-left: 0.8rem;\r\n  width: 100%;\r\n}\r\n.comment-user {\r\n  font-size: 15px;\r\n  line-height: 1.75;\r\n}\r\n.comment-user a {\r\n  color: #1abc9c !important;\r\n  font-weight: 500;\r\n  transition: 0.3s all;\r\n}\r\n.comment-nickname {\r\n  text-decoration: none;\r\n  color: #1abc9c !important;\r\n  font-weight: 500;\r\n}\r\n.comment-info {\r\n  line-height: 1.75;\r\n  font-size: 0.75rem;\r\n  color: #b3b3b3;\r\n}\r\n.reply-btn {\r\n  cursor: pointer;\r\n  float: right;\r\n  color: #ef2f11;\r\n}\r\n.comment-content {\r\n  font-size: 0.875rem;\r\n  line-height: 1.75;\r\n  padding-top: 0.625rem;\r\n  white-space: pre-line;\r\n  word-wrap: break-word;\r\n  word-break: break-all;\r\n}\r\n.comment-avatar {\r\n  transition: all 0.5s;\r\n}\r\n.comment-avatar:hover {\r\n  transform: rotate(360deg);\r\n}\r\n.like {\r\n  cursor: pointer;\r\n  font-size: 0.875rem;\r\n}\r\n.like:hover {\r\n  color: #eb5055;\r\n}\r\n.like-active {\r\n  cursor: pointer;\r\n  font-size: 0.875rem;\r\n  color: #eb5055;\r\n}\r\n.load-wrapper {\r\n  margin-top: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.load-wrapper button {\r\n  background-color: #49b1f5;\r\n  color: #fff;\r\n}\r\n</style>\r\n"]}]}