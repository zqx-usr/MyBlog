{"remainingRequest":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!B:\\GitCode\\MyBlog\\blog-vue\\admin\\src\\views\\website\\Website.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\src\\views\\website\\Website.vue","mtime":1678087978037},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678087964484},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678087976620},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1678087971563},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678087962812},{"path":"B:\\GitCode\\MyBlog\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1678087976619}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgew0KICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCi5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZDpob3ZlciB7DQogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsNCn0NCi5hdmF0YXItdXBsb2FkZXItaWNvbiB7DQogIGZvbnQtc2l6ZTogMjhweDsNCiAgY29sb3I6ICM4YzkzOWQ7DQogIHdpZHRoOiAxMjBweDsNCiAgaGVpZ2h0OiAxMjBweDsNCiAgbGluZS1oZWlnaHQ6IDEyMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouYXZhdGFyIHsNCiAgd2lkdGg6IDEyMHB4Ow0KICBoZWlnaHQ6IDEyMHB4Ow0KICBkaXNwbGF5OiBibG9jazsNCn0NCi5jb3Zlci11cGxvYWRlciAuZWwtdXBsb2FkIHsNCiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQouY292ZXItdXBsb2FkZXIgLmVsLXVwbG9hZDpob3ZlciB7DQogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsNCn0NCi5jb3Zlci11cGxvYWRlci1pY29uIHsNCiAgZm9udC1zaXplOiAyOHB4Ow0KICBjb2xvcjogIzhjOTM5ZDsNCiAgd2lkdGg6IDMwMHB4Ow0KICBoZWlnaHQ6IDE2MHB4Ow0KICBsaW5lLWhlaWdodDogMTYwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5jb3ZlciB7DQogIHdpZHRoOiAzMDBweDsNCiAgaGVpZ2h0OiAxNjBweDsNCiAgZGlzcGxheTogYmxvY2s7DQp9DQo="},{"version":3,"sources":["Website.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Website.vue","sourceRoot":"src/views/website","sourcesContent":["<template>\r\n  <el-card class=\"main-card\">\r\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n      <!-- 修改信息 -->\r\n      <el-tab-pane label=\"网站信息\" name=\"info\">\r\n        <el-form\r\n          label-width=\"100px\"\r\n          :model=\"websiteConfigForm\"\r\n          label-position=\"left\"\r\n        >\r\n          <el-form-item label=\"网站头像\">\r\n            <el-upload\r\n              class=\"avatar-uploader\"\r\n              action=\"/api/admin/config/images\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleWebsiteAvatarSuccess\"\r\n            >\r\n              <img\r\n                v-if=\"websiteConfigForm.websiteAvatar\"\r\n                :src=\"websiteConfigForm.websiteAvatar\"\r\n                class=\"avatar\"\r\n              />\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label=\"网站名称\">\r\n            <el-input\r\n              v-model=\"websiteConfigForm.websiteName\"\r\n              size=\"small\"\r\n              style=\"width:400px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"网站作者\">\r\n            <el-input\r\n              v-model=\"websiteConfigForm.websiteAuthor\"\r\n              size=\"small\"\r\n              style=\"width:400px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"网站简介\">\r\n            <el-input\r\n              v-model=\"websiteConfigForm.websiteIntro\"\r\n              size=\"small\"\r\n              style=\"width:400px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"网站创建日期\">\r\n            <el-date-picker\r\n              style=\"width:400px\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              v-model=\"websiteConfigForm.websiteCreateTime\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"网站公告\">\r\n            <el-input\r\n              v-model=\"websiteConfigForm.websiteNotice\"\r\n              placeholder=\"请输入公告内容\"\r\n              style=\"width:400px\"\r\n              type=\"textarea\"\r\n              :rows=\"5\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"备案号\">\r\n            <el-input\r\n              v-model=\"websiteConfigForm.websiteRecordNo\"\r\n              size=\"small\"\r\n              style=\"width:400px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"第三方登录\">\r\n            <el-checkbox-group v-model=\"websiteConfigForm.socialLoginList\">\r\n              <el-checkbox label=\"qq\">QQ</el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n            style=\"margin-left:6.3rem\"\r\n            @click=\"updateWebsiteConfig\"\r\n          >\r\n            修改\r\n          </el-button>\r\n        </el-form>\r\n      </el-tab-pane>\r\n      <!-- 网站公告 -->\r\n      <el-tab-pane label=\"社交信息\" name=\"notice\">\r\n        <el-form label-width=\"70px\" :model=\"websiteConfigForm\">\r\n          <el-checkbox-group v-model=\"websiteConfigForm.socialUrlList\">\r\n            <el-form-item label=\"QQ\">\r\n              <el-input\r\n                v-model=\"websiteConfigForm.qq\"\r\n                size=\"small\"\r\n                style=\"width:400px;margin-right:1rem\"\r\n              />\r\n              <el-checkbox label=\"qq\">展示</el-checkbox>\r\n            </el-form-item>\r\n            <el-form-item label=\"Github\">\r\n              <el-input\r\n                v-model=\"websiteConfigForm.github\"\r\n                size=\"small\"\r\n                style=\"width:400px;margin-right:1rem\"\r\n              />\r\n              <el-checkbox label=\"github\">展示</el-checkbox>\r\n            </el-form-item>\r\n            <el-form-item label=\"Gitee\">\r\n              <el-input\r\n                v-model=\"websiteConfigForm.gitee\"\r\n                size=\"small\"\r\n                style=\"width:400px;margin-right:1rem\"\r\n              />\r\n              <el-checkbox label=\"gitee\">展示</el-checkbox>\r\n            </el-form-item>\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"medium\"\r\n              style=\"margin-left:4.375rem\"\r\n              @click=\"updateWebsiteConfig\"\r\n            >\r\n              修改\r\n            </el-button>\r\n          </el-checkbox-group>\r\n        </el-form>\r\n      </el-tab-pane>\r\n      <!-- 修改密码 -->\r\n      <el-tab-pane label=\"其他设置\" name=\"password\">\r\n        <el-form\r\n          label-width=\"120px\"\r\n          :model=\"websiteConfigForm\"\r\n          label-position=\"left\"\r\n        >\r\n          <el-row style=\"width:600px\">\r\n            <el-col :md=\"12\">\r\n              <el-form-item label=\"用户头像\">\r\n                <el-upload\r\n                  class=\"avatar-uploader\"\r\n                  action=\"/api/admin/config/images\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"handleUserAvatarSuccess\"\r\n                >\r\n                  <img\r\n                    v-if=\"websiteConfigForm.userAvatar\"\r\n                    :src=\"websiteConfigForm.userAvatar\"\r\n                    class=\"avatar\"\r\n                  />\r\n                  <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\r\n                </el-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :md=\"12\">\r\n              <el-form-item label=\"游客头像\">\r\n                <el-upload\r\n                  class=\"avatar-uploader\"\r\n                  action=\"/api/admin/config/images\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"handleTouristAvatarSuccess\"\r\n                >\r\n                  <img\r\n                    v-if=\"websiteConfigForm.touristAvatar\"\r\n                    :src=\"websiteConfigForm.touristAvatar\"\r\n                    class=\"avatar\"\r\n                  />\r\n                  <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\r\n                </el-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"默认文章封面\">\r\n            <el-upload\r\n              class=\"cover-uploader\"\r\n              action=\"/api/admin/config/images\"\r\n              :before-upload=\"beforeUpload\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleArticleCoverSuccess\"\r\n            >\r\n              <img\r\n                v-if=\"websiteConfigForm.articleCover\"\r\n                :src=\"websiteConfigForm.articleCover\"\r\n                class=\"cover\"\r\n              />\r\n              <i v-else class=\"el-icon-plus cover-uploader-icon\" />\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱通知\">\r\n            <el-radio-group v-model=\"websiteConfigForm.isEmailNotice\">\r\n              <el-radio :label=\"0\">关闭</el-radio>\r\n              <el-radio :label=\"1\">开启</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"评论审核\">\r\n            <el-radio-group v-model=\"websiteConfigForm.isCommentReview\">\r\n              <el-radio :label=\"0\">关闭</el-radio>\r\n              <el-radio :label=\"1\">开启</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"留言审核\">\r\n            <el-radio-group v-model=\"websiteConfigForm.isMessageReview\">\r\n              <el-radio :label=\"0\">关闭</el-radio>\r\n              <el-radio :label=\"1\">开启</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"打赏状态\">\r\n            <el-radio-group v-model=\"websiteConfigForm.isReward\">\r\n              <el-radio :label=\"0\">关闭</el-radio>\r\n              <el-radio :label=\"1\">开启</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-row style=\"width:600px\" v-show=\"websiteConfigForm.isReward == 1\">\r\n            <el-col :md=\"12\">\r\n              <el-form-item label=\"微信收款码\">\r\n                <el-upload\r\n                  class=\"avatar-uploader\"\r\n                  action=\"/api/admin/config/images\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"handleWeiXinSuccess\"\r\n                >\r\n                  <img\r\n                    v-if=\"websiteConfigForm.weiXinQRCode\"\r\n                    :src=\"websiteConfigForm.weiXinQRCode\"\r\n                    class=\"avatar\"\r\n                  />\r\n                  <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\r\n                </el-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :md=\"12\">\r\n              <el-form-item label=\"支付宝收款码\">\r\n                <el-upload\r\n                  class=\"avatar-uploader\"\r\n                  action=\"/api/admin/config/images\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"handleAlipaySuccess\"\r\n                >\r\n                  <img\r\n                    v-if=\"websiteConfigForm.alipayQRCode\"\r\n                    :src=\"websiteConfigForm.alipayQRCode\"\r\n                    class=\"avatar\"\r\n                  />\r\n                  <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\r\n                </el-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"聊天室状态\">\r\n            <el-radio-group v-model=\"websiteConfigForm.isChatRoom\">\r\n              <el-radio :label=\"0\">关闭</el-radio>\r\n              <el-radio :label=\"1\">开启</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item\r\n            label=\"Websocket地址\"\r\n            v-show=\"websiteConfigForm.isChatRoom == 1\"\r\n          >\r\n            <el-input\r\n              v-model=\"websiteConfigForm.websocketUrl\"\r\n              size=\"small\"\r\n              style=\"width:400px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"音乐播放器状态\">\r\n            <el-radio-group v-model=\"websiteConfigForm.isMusicPlayer\">\r\n              <el-radio :label=\"0\">关闭</el-radio>\r\n              <el-radio :label=\"1\">开启</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"medium\"\r\n            style=\"margin-left:6.3rem\"\r\n            @click=\"updateWebsiteConfig\"\r\n          >\r\n            修改\r\n          </el-button>\r\n        </el-form>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport * as imageConversion from \"image-conversion\";\r\nexport default {\r\n  created() {\r\n    this.getWebsiteConfig();\r\n  },\r\n  data: function() {\r\n    return {\r\n      websiteConfigForm: {\r\n        websiteAvatar: \"\",\r\n        websiteName: \"\",\r\n        websiteAuthor: \"\",\r\n        websiteIntro: \"\",\r\n        websiteNotice: \"\",\r\n        websiteCreateTime: null,\r\n        websiteRecordNo: \"\",\r\n        socialLoginList: [],\r\n        socialUrlList: [],\r\n        qq: \"\",\r\n        github: \"\",\r\n        gitee: \"\",\r\n        userAvatar: \"\",\r\n        touristAvatar: \"\",\r\n        isReward: 1,\r\n        weiXinQRCode: \"\",\r\n        alipayQRCode: \"\",\r\n        articleCover: \"\",\r\n        isChatRoom: 1,\r\n        websocketUrl: \"\",\r\n        isMusicPlayer: 1,\r\n        isEmailNotice: 1,\r\n        isCommentReview: 0,\r\n        isMessageReview: 0\r\n      },\r\n      activeName: \"info\"\r\n    };\r\n  },\r\n  methods: {\r\n    getWebsiteConfig() {\r\n      this.axios.get(\"/api/admin/website/config\").then(({ data }) => {\r\n        this.websiteConfigForm = data.data;\r\n      });\r\n    },\r\n    beforeUpload(file) {\r\n      return new Promise(resolve => {\r\n        if (file.size / 1024 < this.config.UPLOAD_SIZE) {\r\n          resolve(file);\r\n        }\r\n        // 压缩到200KB,这里的200就是要压缩的大小,可自定义\r\n        imageConversion\r\n          .compressAccurately(file, this.config.UPLOAD_SIZE)\r\n          .then(res => {\r\n            resolve(res);\r\n          });\r\n      });\r\n    },\r\n    handleClick(tab) {\r\n      console.log(tab);\r\n    },\r\n    handleWebsiteAvatarSuccess(response) {\r\n      this.websiteConfigForm.websiteAvatar = response.data;\r\n    },\r\n    handleUserAvatarSuccess(response) {\r\n      this.websiteConfigForm.userAvatar = response.data;\r\n    },\r\n    handleArticleCoverSuccess(response) {\r\n      this.websiteConfigForm.articleCover = response.data;\r\n    },\r\n    handleTouristAvatarSuccess(response) {\r\n      this.websiteConfigForm.touristAvatar = response.data;\r\n    },\r\n    handleWeiXinSuccess(response) {\r\n      this.websiteConfigForm.weiXinQRCode = response.data;\r\n    },\r\n    handleAlipaySuccess(response) {\r\n      this.websiteConfigForm.alipayQRCode = response.data;\r\n    },\r\n    updateWebsiteConfig() {\r\n      this.axios\r\n        .put(\"/api/admin/website/config\", this.websiteConfigForm)\r\n        .then(({ data }) => {\r\n          if (data.flag) {\r\n            this.$notify.success({\r\n              title: \"成功\",\r\n              message: data.message\r\n            });\r\n          } else {\r\n            this.$notify.error({\r\n              title: \"失败\",\r\n              message: data.message\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n}\r\n.cover-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.cover-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.cover-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 300px;\r\n  height: 160px;\r\n  line-height: 160px;\r\n  text-align: center;\r\n}\r\n.cover {\r\n  width: 300px;\r\n  height: 160px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}